### 🚀 电商商品列表页与详情页开发



#### 1. 项目需求（保持不变）

- **目标**：实现电商平台的商品列表页与商品详情页。
- **要求**：组件化拆分合理、状态管理清晰、支持响应式。

------



#### 2. 实战步骤与高分扩展细节



**👉 第一步：项目初始化**

> **基础要求**：使用 Create React App 创建项目，配置 UI 库（Ant Design / Material UI）、状态管理库（Redux Toolkit / Zustand）。

- **【高分扩展指标】**：
  1. **路径别名配置 (Path Aliases)**：不要在代码里出现 `../../../components/Button` 这种丑陋的路径。配置 `craco` 或 `webpack` 别名，使用 `@/components/Button`。
  2. **规范化目录结构**：
     - 建立 `src/assets` (静态资源), `src/hooks` (自定义钩子), `src/utils` (工具函数), `src/constants` (常量定义), `src/types` (TypeScript类型定义，如果不用TS则忽略)。
  3. **安装 classnames 或 clsx 库**：用于优雅地处理动态 CSS 类名，而不是用字符串拼接。

**👉 第二步：组件拆分**

> **基础要求**：拆分通用组件（导航、分页、筛选）、业务组件（卡片、规格、购物车）、页面组件。

- **【高分扩展指标】**：
  1. **增加“空状态”组件 (Empty State)**：当筛选结果为 0 时，不要只留白。封装一个 `<EmptyPlaceholder />` 组件，展示一个插画提示“没有找到相关商品”，并提供“重置筛选”的按钮。
  2. **增加“图片容错”处理**：封装一个 `<ImageWithFallback />` 组件。当 Mock 数据的图片链接失效（404）时，自动显示一张默认的“暂无图片”占位图，防止页面布局崩坏。
  3. **Layout 布局组件化**：创建一个 `<MainLayout>` 组件包裹页面，统一处理导航栏和页脚，而不是在每个页面里复制粘贴导航栏代码。

**👉 第三步：实现组件通信与状态管理**

> **基础要求**：Props 父子传递，使用 Redux/Zustand 存储全局数据（列表、筛选、购物车）。

- **【高分扩展指标】**：
  1. **购物车持久化 (Persistence)**：这是最直观的加分点。配置状态管理库的中间件（如 Redux-persist 或 Zustand 的 persist），**刷新页面后购物车里的商品不消失**。
  2. **派生状态 (Derived State) 计算**：不要在 Store 里直接存“购物车总价”。而是存“数量”和“单价”，在组件里通过 Selector 动态计算总价。
     - *代码体现*：`const totalPrice = cartItems.reduce((acc, item) => acc + item.price * item.count, 0)`。
  3. **自定义 Hooks 封装**：
     - 将购物车的逻辑抽离成 `useCart()` Hook，在任何组件里一行代码调用 `const { addToCart, cartCount } = useCart()`，体现逻辑复用能力。

**👉 第四步：开发响应式 UI**

> **基础要求**：UI 库 + 自定义样式，确保电脑、平板、手机端展示良好。

- **【高分扩展指标】**：
  1. **移动端专属交互**：
     - 在 PC 端：筛选栏在左侧或顶部平铺。
     - 在 Mobile 端：筛选栏自动隐藏，变成一个“漏斗图标”，点击后从**侧边滑出抽屉 (Drawer)** 进行筛选。
  2. **交互反馈 (Micro-interaction)**：
     - **Hover 效果**：商品卡片鼠标悬停时，增加轻微的上浮阴影 (`transform: translateY(-5px)`)。
     - **点击波纹**：按钮点击时有 Ripple 效果（UI库通常自带，如果没有手动加一个 `active:scale-95` 缩放效果）。

**👉 第四步：模拟数据交互**

> **基础要求**：Mock.js 生成数据，实现筛选（价格、分类）、排序、分页、加购。

- **【高分扩展指标】**：
  1. **骨架屏加载 (Skeleton Loading)**：
     - *绝对加分项*。在数据请求还没返回时（Mock设置延时 500ms），不要只显示一个转圈圈 `Spin`。
     - 展示和商品卡片形状一样的灰色色块闪烁效果。这会让应用看起来像大厂做的。
  2. **防抖搜索 (Debounce Search)**：
     - 在输入框搜索商品名称时，不要每输入一个字母就请求一次接口。
     - 使用 `lodash.debounce` 或手写防抖逻辑，用户停止输入 500ms 后再触发筛选。
  3. **Toast 全局通知**：
     - 点击“加入购物车”时，不要用 `alert('添加成功')`。
     - 使用 UI 库的 `Message` 或 `Toast` 组件，在屏幕右上角弹出“✅ 商品已成功加入购物车”，3秒后自动消失。

**👉 第六步：代码优化与调试**

> **基础要求**：检查复用性、状态管理合理性，修 Bug。

- **【高分扩展指标】**：

  1. **性能优化 - 防止不必要的渲染**：

     - 对于纯展示的组件（如商品卡片），使用 `React.memo` 包裹。
     - 在筛选排序逻辑中，使用 `useMemo` 缓存排序后的列表结果，避免输入框打字引起列表频繁重新计算。

  2. **404 页面路由兜底**：

     - 配置 React Router，当用户手动输入一个不存在的 URL（如 `/product/99999`）时，显示一个友好的 404 页面，而不是报错白屏。

  3. **代码注释规范**：

     - 不要写“这是按钮”这种废话注释。

     - 在复杂的筛选逻辑函数上方，使用 JSDoc 格式注释：

       JavaScript

       ```
       /**
        * 根据价格区间和关键词过滤商品列表
        * @param {Array} list - 原始商品列表
        * @param {Object} filters - 筛选条件对象
        * @returns {Array} - 过滤后的新列表
        */
       ```

